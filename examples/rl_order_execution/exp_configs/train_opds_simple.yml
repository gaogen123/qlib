qlib_init:
  provider_uri: "~/.qlib/qlib_data/cn_data"
  region: cn

simulator:
  data_granularity: 1
  time_per_step: 1
  vol_limit: null

env:
  concurrency: 1
  parallel_mode: dummy

action_interpreter:
  class: CategoricalActionInterpreter
  kwargs:
    values: 3
    max_step: 5
  module_path: qlib.rl.order_execution.interpreter

state_interpreter:
  class: FullHistoryStateInterpreter
  kwargs:
    data_dim: 4
    data_ticks: 10
    max_step: 5
    processed_data_provider:
      class: HandlerProcessedDataProvider
      kwargs:
        data_dir: ~/.qlib/qlib_data/cn_data/
        feature_columns_today: ["$high", "$low", "$open", "$close"]
        feature_columns_yesterday: []
        backtest: false
      module_path: qlib.rl.data.native
  module_path: qlib.rl.order_execution.interpreter

reward:
  class: PAPenaltyReward
  kwargs:
    penalty: 1.0
    scale: 0.01
  module_path: qlib.rl.order_execution.reward

data:
  source:
    order_dir: ./data/orders
    feature_root_dir: ~/.qlib/qlib_data/cn_data/
    feature_columns_today: ["$close", "$volume"]
    feature_columns_yesterday: []
    total_time: 10
    default_start_time_index: 0
    default_end_time_index: 9
    proc_data_dim: 4
  num_workers: 0
  queue_size: 10

network:
  class: Recurrent
  module_path: qlib.rl.order_execution.network

policy:
  class: PPO
  kwargs:
    lr: 0.0001
  module_path: qlib.rl.order_execution.policy

runtime:
  seed: 42
  use_cuda: false

trainer:
  max_epoch: 10
  repeat_per_collect: 5
  earlystop_patience: 5
  episode_per_collect: 100
  batch_size: 64
  val_every_n_epoch: 2
  checkpoint_path: ./outputs/opds_simple
  checkpoint_every_n_iters: 1
